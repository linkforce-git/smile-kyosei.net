var lpname="",gulp=require("gulp"),plumber=require("gulp-plumber"),notify=require("gulp-notify"),sass=require("gulp-sass")(require("sass")),autoprefixer=require("gulp-autoprefixer"),cssmin=require("gulp-clean-css"),rename=require("gulp-rename"),svgstore=require("gulp-svgstore"),cheerio=require("gulp-cheerio"),imagemin=require("gulp-imagemin"),pngquant=require("imagemin-pngquant"),mozjpeg=require("imagemin-mozjpeg"),webp=require("gulp-webp"),changed=require("gulp-changed"),browsersync=require("browser-sync").create();gulp.task("mainScss",(function(done){gulp.src(lpname+"resources/_scss/**/!(_)*.scss",{base:"_scss"}).pipe(plumber({errorHandler:notify.onError("Error: <%= error.message %>")})).pipe(sass({outputStyle:"expanded"})).pipe(autoprefixer()).pipe(rename({dirname:"css"})).pipe(gulp.dest(lpname+"assets")).pipe(cssmin()).pipe(rename({extname:".min.css"})).pipe(gulp.dest(lpname+"assets")),done()})),gulp.task("svg",(function(done){gulp.src(lpname+"resources/svg/**/*.svg").pipe(changed(lpname+"assets/svg")).pipe(imagemin([imagemin.svgo({plugins:[{removeViewBox:!1}]})])).pipe(gulp.dest(lpname+"assets/svg")),gulp.src(lpname+"resources/svg/icons/*.svg").pipe(imagemin([imagemin.svgo({plugins:[{removeViewBox:!1}]})])).pipe(svgstore({inlineSvg:!0})).pipe(cheerio({run:function($,file){$("style,title,defs").remove(),$("[id]:not(symbol)").removeAttr("id"),$("[class]").removeAttr("class"),$("[data-name]").removeAttr("data-name"),$("[fill]").removeAttr("fill"),$("[stroke]").removeAttr("stroke"),$("[style]:not(svg)").removeAttr("style"),$("svg").attr("style","display:none")},parserOptions:{xmlMode:!0}})).pipe(gulp.dest(lpname+"assets/svg")),done()})),gulp.task("imagemin",(function(done){gulp.src(lpname+"resources/img/**/*.{jpg,jpeg,png,gif,svg}").pipe(changed(lpname+"assets/img")).pipe(imagemin([pngquant({quality:[.65,.8],speed:1}),mozjpeg({quality:80}),imagemin.svgo({plugins:[{removeViewBox:!1}]}),imagemin.gifsicle()])).pipe(gulp.dest(lpname+"assets/img")),done()})),gulp.task("webp",(function(done){gulp.src(lpname+"resources/img/**/*.{jpg,jpeg,png}").pipe(changed(lpname+"assets/img")).pipe(rename((function(path){path.basename+=path.extname}))).pipe(webp({quality:80,method:6})).pipe(gulp.dest(lpname+"assets/img")),done()})),gulp.task("mainWatch",(function(done){gulp.watch(lpname+"resources/_scss/**/*.scss",gulp.series("mainScss")),done()})),gulp.task("svgWatch",(function(done){gulp.watch(lpname+"resources/svg/**/*.svg",gulp.series("svg")),done()})),gulp.task("imgWatch",(function(done){gulp.watch(lpname+"resources/img/**/*",gulp.series("imagemin","webp")),done()})),gulp.task("default",gulp.series(gulp.parallel("mainScss","svg","imagemin","webp"),gulp.parallel("mainWatch","svgWatch","imgWatch")));