$((function(){$.ajax({type:"get",url:"/assets/svg/icons.svg?date=20240618"}).done((function(data){let svg=$(data).find("svg");$("body #svgfile").prepend(svg)}));let window_wsize=$(window).width(),window_hsize=window.innerHeight,urlHash=location.hash,scroll=$(window).scrollTop(),spLayout=window_wsize<768;if($(window).resize((function(){window_wsize=$(window).width(),window_hsize=window.innerHeight,spLayout=window_wsize<768})).trigger("resize"),$("body#orthodontics").length&&$(".h1a").each((function(){$(this).wrap('<div class="h1a_wrap"></div>')})),$("body.ortho").length&&$(".h2a").each((function(){$(this).prepend('<div class="bg"></div>'),$(this).wrap('<div class="h2a_wrap"></div>')})),$("body.column").length&&$(".mainContent h2").each((function(){$(this).prepend('<span class="bg"></span>'),$(this).wrap('<div class="h2_wrap" style="height:'+$(this).outerHeight()+'px;"></div>')})),$(window).scroll((function(){scroll=$(window).scrollTop(),changeActive(),!spLayout&&scroll<60?$("header").addClass("top"):$("header").removeClass("top");let floatBtnEnd=$("#contactArea").length?$("#contactArea"):$("footer");$("body.recruit").length&&(floatBtnEnd=$("#entry").length?$("#entry"):floatBtnEnd),scroll>window_hsize&&scroll<floatBtnEnd.offset().top-window_hsize-1?$("#floatBtn").removeClass("hide"):$("#floatBtn").addClass("hide"),$(".fixedBg").each((function(){$(this).is(":visible")&&scroll>=$(this).offset().top-window_hsize-1&&scroll<$(this).offset().top+$(this).outerHeight()?$(this).addClass("bgShow"):$(this).removeClass("bgShow")})),$("body#orthodontics").length&&$(".h1a_wrap").each((function(){scroll>=$(this).offset().top-$("header").outerHeight()+1?$(this).addClass("fixed"):$(this).removeClass("fixed"),scroll>=$(this).parent().offset().top+$(this).parent().outerHeight()-window_hsize/2?$(this).addClass("hide"):$(this).removeClass("hide")})),$("body.ortho").length&&$(".h2a_wrap").each((function(){scroll>=$(this).offset().top-$("header").outerHeight()+1?$(this).addClass("fixed"):$(this).removeClass("fixed"),scroll>=$(this).parent().offset().top+$(this).parent().outerHeight()-window_hsize/2?$(this).addClass("hide"):$(this).removeClass("hide")})),$("body.column").length&&$(".h2_wrap").each((function(){scroll>=$(this).offset().top-$("header").outerHeight()+1?$(this).addClass("fixed"):$(this).removeClass("fixed"),scroll>=$(this).parent().offset().top+$(this).parent().outerHeight()?$(this).addClass("hide"):$(this).removeClass("hide")}))})).trigger("scroll"),urlHash){let position=$(urlHash).offset().top-$("header").outerHeight();$("html, body").animate({scrollTop:position},500,"swing")}Modernizr.cookies&&location.pathname.match(/^\/orthodontics\/.+/)&&$(window).scroll((function(){window_hsize<scroll&&$.cookie("read"+location.pathname.replace(/\//g,"_"),"1",{expires:365,path:"/"})})),$('a[href^="#"]').click((function(){let href=$(this).attr("href"),target=$("#"==href||""==href?"html":href);if((target.hasClass("toggleWrap")||target.hasClass("tglBox"))&&$(href+"_open").prop("checked",!0).change(),!target.hasClass("toggleWrap")){let position=target.offset().top-$("header").outerHeight();$("html, body").animate({scrollTop:position},500,"swing")}return!1})),jQuery.prototype.mousedragscrollable=function(){let target;$(this).each((function(i,e){$(e).mousedown((function(event){return event.preventDefault(),target=$(e),$(e).data({down:!0,move:!1,x:event.clientX,y:event.clientY,scrollleft:$(e).scrollLeft(),scrolltop:$(e).scrollTop()}),!1})),$(e).click((function(event){if($(e).data("move"))return!1}))})),$(document).mousemove((function(event){if($(target).data("down")){event.preventDefault();let move_x=$(target).data("x")-event.clientX,move_y=$(target).data("y")-event.clientY;if(0===move_x&&0===move_y)return;return $(target).data("move",!0),$(target).scrollLeft($(target).data("scrollleft")+move_x),$(target).scrollTop($(target).data("scrolltop")+move_y),!1}})).mouseup((function(event){return $(target).data("down",!1),!1}))},$(".dragScroll").mousedragscrollable(),document.querySelectorAll(".information-area").forEach((function(area,i){let xhr=new XMLHttpRequest;xhr.open("GET","/information/ajax/index.php",!0),xhr.onreadystatechange=function(){4===xhr.readyState&&200===xhr.status&&area.insertAdjacentHTML("beforeend",xhr.responseText)},xhr.send(null)})),$(".toggle_open").change((function(){let target,position=$("#"+$(this).attr("id").replace(/_open[0-9]*$/g,"")).offset().top-$("header").outerHeight();$("html, body").animate({scrollTop:position},300,"swing")}));let no_autoscroll=!1;if($("header .btn_menu").is(":visible")&&$(".submenu_open, .subnav_open").click((function(){$(this).change((function(){if($(this).prop("checked")){let startpos=$("#navGrp1").offset().top,targetpos,movepos=$("#"+$(this).attr("id")).parent().offset().top-startpos;$("header nav > .wrapper").animate({scrollTop:movepos},500,"swing")}}))})),$("header .btn_menu").is(":visible")&&$("#menu_open").change((function(){if($(this).prop("checked"))if("undefined"!=typeof opened_menu&&0!=opened_menu.length){let mvtarget="";setTimeout((function(){$.each(opened_menu,(function(i,val){let menu_name="#"+val+":checkbox";$(menu_name).length&&($(menu_name).prop("checked",!0).change(),""==mvtarget&&(mvtarget=menu_name))}))}),300),setTimeout((function(){let startpos=$("#navGrp1").offset().top,targetpos,movepos=$(mvtarget).parent().offset().top-startpos;$("header nav > .wrapper").animate({scrollTop:movepos},500,"swing")}),500),"undefined"!=typeof current_menu&&0!=current_menu.length&&(setTimeout((function(){$("#"+current_menu).addClass("active1")}),1e3),setTimeout((function(){$("#"+current_menu).removeClass("active1"),$("#"+current_menu).addClass("active2")}),1300))}else"undefined"!=typeof current_menu&&0!=current_menu.length&&(setTimeout((function(){$("#"+current_menu).addClass("active1")}),500),setTimeout((function(){$("#"+current_menu).removeClass("active1"),$("#"+current_menu).addClass("active2")}),800));else $(".subnav_open").prop("checked",!1),$(".submenu_open").prop("checked",!1),setTimeout((function(){$("header nav > .wrapper").animate({scrollTop:0},0,"swing")}),100),$("#"+current_menu).removeClass("active1"),$("#"+current_menu).removeClass("active2")})),$("#contactArea .btn_reserv, footer .btn_reserv, body.ortho .contactBox .btn, body.ortho .btnWrap .btna:has(+.tel)").click((function(){$("#form_popup").addClass("direct")})),$("#form_open").change((function(){$(this).prop("checked")?(window.dataLayer=window.dataLayer||[],dataLayer.push({trackPageview:"/form",event:"loadready"})):$("#form_popup").removeClass("direct thanks")})),$("body#top").length){let show_area_hsize=window_hsize-(spLayout?0:60),fv_wrapper_hsize=$("#fv>.wrapper").innerHeight();if(show_area_hsize<fv_wrapper_hsize){let scale=(show_area_hsize-110)/(fv_wrapper_hsize-110);$("#fv>.wrapper").css({"transform-origin":"left 90px",transform:"scale("+scale+")"}),$("#fv").css("height",show_area_hsize+90+"px"),$("#fv .scroll").css("right","-"+100*(1-scale)/scale+"%"),$("#fv .scroll").css("bottom","-"+40*(1-scale)/scale+"px")}}if($("body#process, body#price").length&&urlHash&&$(urlHash+"_open").prop("checked",!0).change(),$("body#quality").length){let page=1,maxPage=$(".effortSec").length+1;for(;page<maxPage&&scroll>=$("#effort"+page+">.wrapper").offset().top-window_hsize-1;)$("#effort"+page).addClass("show"),page++;let tmpPage=page;for(;tmpPage<maxPage;)$("#effort"+tmpPage).css("height","100vh"),tmpPage++,tmpPage<maxPage?$("#effort"+tmpPage).css("display","none"):($("#messageArea").css("display","none"),$("footer").css("height","0"),spLayout||($(".bodyWrapper").css("border-radius","10px 10px 0 0"),$("body").css("padding-bottom","0")));$(window).scroll((function(){if(page<maxPage&&$("#effort"+page).is(":visible")&&scroll>=$("#effort"+page+">.wrapper").offset().top-window_hsize-1){let tmpPage=page;page++,setTimeout((function(){$("#effort"+tmpPage).addClass("show")}),400),setTimeout((function(){$("#effort"+tmpPage).css("height","auto"),tmpPage++,tmpPage<maxPage?$("#effort"+tmpPage).css("display","block"):($("#messageArea").css("display","block"),$("footer").css("height","auto"),spLayout||($(".bodyWrapper").css("border-radius",""),$("body").css("padding-bottom","")))}),1e3)}})),$(".pageLink").click((function(){let newPage=$(this).data("page");for(;page<newPage;)$("#effort"+page).addClass("show"),$("#effort"+page).css("height","auto"),page++,page<maxPage?$("#effort"+page).css("display","block"):$("#messageArea, footer").css("display","block");let position=$("#effort"+newPage+">.wrapper").offset().top-window_hsize;$("html, body").animate({scrollTop:position},500,"swing")}))}function changeActive(){$(".ani").each((function(){var aniPos=$(this).offset().top,scroll,windowHeight;$(window).scrollTop()>aniPos-5*window.innerHeight/6&&$(this).addClass("active")}))}$("body#ultra-fit-denture").length&&$(".controller").draggable({axis:"x",containment:"parent",drag:function(event,ui){let tmpW=ui.position.left;$(this).next(".inner").children(".imgL").css("width",tmpW)}}),$(".setupList").each((function(i,elem){const setupList=$(elem);let setupLen,userInput=!1,loopTimeoutID,playTimeoutID;if(setupList.on("init",(function(event,slick){setupLen=slick.slideCount})).slick({arrows:!1,fade:!0,speed:0,autoplay:!0,autoplaySpeed:120,pauseOnFocus:!1,pauseOnHover:!1,swipe:!1,draggable:!1}).on("afterChange",(function(event,slick,currentSlide){!userInput&&currentSlide>=setupLen-1&&($(this).slick("slickPause"),loopTimeoutID=setTimeout((function(){setupList.slick("slickGoTo",0,!1)}),1e3),playTimeoutID=setTimeout((function(){setupList.slick("slickPlay")}),2e3))})),setupList.next().hasClass("setupRange")){const setupRange=setupList.next();setupRange.val(0).attr("min",0).attr("max",setupLen-1),setupList.on("afterChange",(function(event,slick,currentSlide){setupRange.val(currentSlide).change()})),setupRange.on("input change",(function(){setupList.slick("slickGoTo",setupRange.val(),!1)})).on("mousedown touchstart touchmove keydown",(function(){userInput=!0,clearTimeout(loopTimeoutID),clearTimeout(playTimeoutID),setupList.slick("slickPause")})).on("mouseup touchend keyup",(function(){userInput=!1,setupList.slick("slickCurrentSlide")<setupLen-1?playTimeoutID=setTimeout((function(){setupList.slick("slickPlay")}),1e3):(loopTimeoutID=setTimeout((function(){setupList.slick("slickGoTo",0,!1)}),1e3),playTimeoutID=setTimeout((function(){setupList.slick("slickPlay")}),2e3))}))}})),$(".setupRange").on("input change",(function(){const activeColor=$(this).css("color"),inactiveColor=$(this).parent().css("color").replace("rgb(","rgba(").replace(")",", 0.2)"),ratio=(this.value-this.min)/(this.max-this.min)*100;$(this).css("background",`linear-gradient(90deg, ${activeColor} ${ratio}%, ${inactiveColor} ${ratio}%)`)}));var contactForm=$("form#contact_form"),contactValidator=contactForm.validate({ignore:{},rules:{date1:{required:!0},"time1[]":{required:!0},date2:{required:!0},"time2[]":{required:!0},"purpose[]":{required:!0},name:{required:!0},email:{required:!0,email:!0},tel:{required:!0,telnum:!0},privacy:{required:!0}},messages:{date1:{required:"第一希望を選択してください"},"time1[]":{required:"第一希望を選択してください"},date2:{required:"第二希望を選択してください"},"time2[]":{required:"第二希望を選択してください"},"purpose[]":{required:"受けたい治療を選択してください"},name:{required:"氏名を入力してください"},email:{required:"メールアドレスを入力してください",email:"メールアドレスの形式で入力してください"},tel:{required:"電話番号を入力してください",telnum:"電話番号の形式で入力してください"},privacy:{required:"個人情報保護方針をご確認ください"}},groups:{datetime1:"date1 time1[]",datetime2:"date2 time2[]"},errorPlacement:function(error,element){error.appendTo(element.parent().parent())}});$("#btnForm").on("click",(function(e){if(e.preventDefault(),contactForm.valid()){var $form=$("#contact_form"),$button=$form.find("#btnForm");if($button.hasClass("disabled"))return void console.log("button is disabled.");$.ajax({url:"/send",type:"post",data:$form.serialize(),timeout:1e4,beforeSend:function(xhr,settings){$button.addClass("disabled")},complete:function(xhr,textStatus){$button.removeClass("disabled")},success:function(result,textStatus,xhr){"success"==result?(window.dataLayer=window.dataLayer||[],dataLayer.push({trackPageview:"/thanks",event:"loadready"}),$form[0].reset(),$("#form_popup").addClass("thanks")):(console.log(result),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。"))},error:function(xhr,textStatus,error){console.log("通信エラー"),console.log(xhr),console.log(textStatus),console.log(error),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。")}})}else $("#form_popup .reserv_form .wrapper").animate({scrollTop:0},{queue:!1})}));var workplaceTourForm=$("form#workplace_tour_form"),wtValidator=workplaceTourForm.validate({ignore:{},rules:{wt_name:{required:!0},wt_tel:{required:!0,telnum:!0},wt_email:{required:!0,email:!0},tourJoin:{required:!0},wt_privacy:{required:!0}},messages:{wt_name:{required:"氏名を入力してください"},wt_tel:{required:"電話番号を入力してください",telnum:"電話番号の形式で入力してください"},wt_email:{required:"メールアドレスを入力してください",email:"メールアドレスの形式で入力してください"},tourJoin:{required:"希望を選択してください"},wt_privacy:{required:"個人情報保護方針をご確認ください"}},errorPlacement:function(error,element){error.appendTo(element.parent().parent())}});$("#btnWorkplaceTourForm").on("click",(function(e){if(e.preventDefault(),workplaceTourForm.valid()){var $form=$("#workplace_tour_form"),$button=$form.find("#btnWorkplaceTourForm");if($button.hasClass("disabled"))return void console.log("button is disabled.");$.ajax({url:"/recruit/send",type:"post",data:$form.serialize(),timeout:1e4,beforeSend:function(xhr,settings){$button.addClass("disabled")},complete:function(xhr,textStatus){$button.removeClass("disabled")},success:function(result,textStatus,xhr){"success"==result?(window.dataLayer=window.dataLayer||[],dataLayer.push({trackPageview:"/recruit/thanks",event:"loadready"}),$form[0].reset(),$("#wt_form_thanks_open").prop("checked",!0).change()):(console.log(result),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。"))},error:function(xhr,textStatus,error){console.log("通信エラー"),console.log(xhr),console.log(textStatus),console.log(error),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。")}})}})),jQuery.validator.addMethod("kana",(function(value,element){return this.optional(element)||/^([ァ-ヶーぁ-ん]+)$/.test(value)}),"全角ひらがな･カタカナを入力してください"),jQuery.validator.addMethod("hiragana",(function(value,element){return this.optional(element)||/^([ぁ-ん]+)$/.test(value)}),"全角ひらがなを入力してください"),jQuery.validator.addMethod("katakana",(function(value,element){return this.optional(element)||/^([ァ-ヶー]+)$/.test(value)}),"全角カタカナを入力してください"),jQuery.validator.addMethod("hankana",(function(value,element){return this.optional(element)||/^([ｧ-ﾝﾞﾟ]+)$/.test(value)}),"半角カタカナを入力してください"),jQuery.validator.addMethod("alphabet",(function(value,element){return this.optional(element)||/^([a-zA-z\s]+)$/.test(value)}),"半角英字を入力してください"),jQuery.validator.addMethod("alphanum",(function(value,element){return this.optional(element)||/^([a-zA-Z0-9]+)$/.test(value)}),"半角英数字を入力してください"),jQuery.validator.addMethod("postnum",(function(value,element){return this.optional(element)||/^\d{3}\-\d{4}$|^[0-9]{7}$/.test(value)}),"郵便番号を入力してください（例:123-4567）"),jQuery.validator.addMethod("mobilenum",(function(value,element){return this.optional(element)||/^0\d0-\d{4}-\d{4}$/.test(value)}),"携帯番号を入力してください（例:010-2345-6789）"),jQuery.validator.addMethod("telnum",(function(value,element){return this.optional(element)||/^(0\d{1,4}[\s-]?\d{1,4}[\s-]?\d{4})$/.test(value)}),"電話番号を入力してください（例:012-345-6789）"),$("form").on("keydown","input, button, select",(function(e){if(13==e.keyCode){if("submit"==$(this).attr("type"))return;if("searchBox"==$(this).attr("id"))return;var form,focusable=$(this).closest("form").find('input, button[type="submit"], select, textarea').not("[readonly]").filter(":visible");if(e.shiftKey)focusable.eq(focusable.index(this)-1).focus();else{var next=focusable.eq(focusable.index(this)+1);next.length?next.focus():focusable.eq(0).focus()}e.preventDefault()}})),$('input[type="radio"], input[type="checkbox"], select').change((function(){var name=$(this).attr("name");name&&(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"event",category:"form_event",action:"select",label:name}))})),$('input[type="text"], input[type="number"], input[type="email"], input[type="tel"]').focus((function(){var name=$(this).attr("name");name&&(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"event",category:"form_event",action:"select",label:name}))})),$('[id^="btn"]').click((function(){var name=$(this).attr("id");window.dataLayer=window.dataLayer||[],dataLayer.push({event:"event",category:"form_event",action:"click",label:name})}))}));