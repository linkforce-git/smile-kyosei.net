$(function(){function e(){$(".ani").each(function(){var e=$(this).offset().top,t=$(window).scrollTop(),o=window.innerHeight;t>e-5*o/6&&$(this).addClass("active")})}$.ajax({type:"get",url:"/assets/svg/icons.svg?date=20240618"}).done(function(e){let t=$(e).find("svg");$("body #svgfile").prepend(t)});let t=$(window).width(),o=window.innerHeight,a=location.hash,n=$(window).scrollTop(),i=t<768;if($(window).resize(function(){t=$(window).width(),o=window.innerHeight,i=t<768}).trigger("resize"),$("body#orthodontics").length&&$(".h1a").each(function(){$(this).wrap('<div class="h1a_wrap"></div>')}),$("body.ortho").length&&$(".h2a").each(function(){$(this).prepend('<div class="bg"></div>'),$(this).wrap('<div class="h2a_wrap"></div>')}),$("body.column").length&&$(".mainContent h2").each(function(){$(this).prepend('<span class="bg"></span>'),$(this).wrap('<div class="h2_wrap" style="height:'+$(this).outerHeight()+'px;"></div>')}),$(window).scroll(function(){n=$(window).scrollTop(),e(),!i&&n<60?$("header").addClass("top"):$("header").removeClass("top");let t=$("#contactArea").length?$("#contactArea"):$("footer");$("body.recruit").length&&(t=$("#entry").length?$("#entry"):t),n>o&&n<t.offset().top-o-1?$("#floatBtn").removeClass("hide"):$("#floatBtn").addClass("hide"),$(".fixedBg").each(function(){$(this).is(":visible")&&n>=$(this).offset().top-o-1&&n<$(this).offset().top+$(this).outerHeight()?$(this).addClass("bgShow"):$(this).removeClass("bgShow")}),$("body#orthodontics").length&&$(".h1a_wrap").each(function(){n>=$(this).offset().top-$("header").outerHeight()+1?$(this).addClass("fixed"):$(this).removeClass("fixed"),n>=$(this).parent().offset().top+$(this).parent().outerHeight()-o/2?$(this).addClass("hide"):$(this).removeClass("hide")}),$("body.ortho").length&&$(".h2a_wrap").each(function(){n>=$(this).offset().top-$("header").outerHeight()+1?$(this).addClass("fixed"):$(this).removeClass("fixed"),n>=$(this).parent().offset().top+$(this).parent().outerHeight()-o/2?$(this).addClass("hide"):$(this).removeClass("hide")}),$("body.column").length&&$(".h2_wrap").each(function(){n>=$(this).offset().top-$("header").outerHeight()+1?$(this).addClass("fixed"):$(this).removeClass("fixed"),n>=$(this).parent().offset().top+$(this).parent().outerHeight()?$(this).addClass("hide"):$(this).removeClass("hide")})}).trigger("scroll"),a){let e=$(a).offset().top-$("header").outerHeight();$("html, body").animate({scrollTop:e},500,"swing")}Modernizr.cookies&&location.pathname.match(/^\/orthodontics\/.+/)&&$(window).scroll(function(){o<n&&$.cookie("read"+location.pathname.replace(/\//g,"_"),"1",{expires:365,path:"/"})}),$('a[href^="#"]').click(function(){let e=$(this).attr("href"),t=$("#"==e||""==e?"html":e);if((t.hasClass("toggleWrap")||t.hasClass("tglBox"))&&$(e+"_open").prop("checked",!0).change(),!t.hasClass("toggleWrap")){let e=t.offset().top-$("header").outerHeight();$("html, body").animate({scrollTop:e},500,"swing")}return!1}),jQuery.prototype.mousedragscrollable=function(){let e;$(this).each(function(t,o){$(o).mousedown(function(t){return t.preventDefault(),e=$(o),$(o).data({down:!0,move:!1,x:t.clientX,y:t.clientY,scrollleft:$(o).scrollLeft(),scrolltop:$(o).scrollTop()}),!1}),$(o).click(function(e){if($(o).data("move"))return!1})}),$(document).mousemove(function(t){if($(e).data("down")){t.preventDefault();let o=$(e).data("x")-t.clientX,a=$(e).data("y")-t.clientY;if(0===o&&0===a)return;return $(e).data("move",!0),$(e).scrollLeft($(e).data("scrollleft")+o),$(e).scrollTop($(e).data("scrolltop")+a),!1}}).mouseup(function(t){return $(e).data("down",!1),!1})},$(".dragScroll").mousedragscrollable(),document.querySelectorAll(".information-area").forEach(function(e,t){let o=new XMLHttpRequest;o.open("GET","/information/ajax/index.php",!0),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&e.insertAdjacentHTML("beforeend",o.responseText)},o.send(null)}),$(".toggle_open").change(function(){let e=$("#"+$(this).attr("id").replace(/_open[0-9]*$/g,"")),t=e.offset().top-$("header").outerHeight();$("html, body").animate({scrollTop:t},300,"swing")});if($("header .btn_menu").is(":visible")&&$(".submenu_open, .subnav_open").click(function(){$(this).change(function(){if($(this).prop("checked")){let e=$("#navGrp1").offset().top,t=$("#"+$(this).attr("id")).parent().offset().top,o=t-e;$("header nav > .wrapper").animate({scrollTop:o},500,"swing")}})}),$("header .btn_menu").is(":visible")&&$("#menu_open").change(function(){if($(this).prop("checked"))if("undefined"!=typeof opened_menu&&0!=opened_menu.length){let e="";setTimeout(function(){$.each(opened_menu,function(t,o){let a="#"+o+":checkbox";$(a).length&&($(a).prop("checked",!0).change(),""==e&&(e=a))})},300),setTimeout(function(){let t=$("#navGrp1").offset().top,o=$(e).parent().offset().top,a=o-t;$("header nav > .wrapper").animate({scrollTop:a},500,"swing")},500),"undefined"!=typeof current_menu&&0!=current_menu.length&&(setTimeout(function(){$("#"+current_menu).addClass("active1")},1e3),setTimeout(function(){$("#"+current_menu).removeClass("active1"),$("#"+current_menu).addClass("active2")},1300))}else"undefined"!=typeof current_menu&&0!=current_menu.length&&(setTimeout(function(){$("#"+current_menu).addClass("active1")},500),setTimeout(function(){$("#"+current_menu).removeClass("active1"),$("#"+current_menu).addClass("active2")},800));else $(".subnav_open").prop("checked",!1),$(".submenu_open").prop("checked",!1),setTimeout(function(){$("header nav > .wrapper").animate({scrollTop:0},0,"swing")},100),$("#"+current_menu).removeClass("active1"),$("#"+current_menu).removeClass("active2")}),$("#contactArea .btn_reserv, footer .btn_reserv, body.ortho .contactBox .btn, body.ortho .btnWrap .btna:has(+.tel)").click(function(){$("#form_popup").addClass("direct")}),$("#form_open").change(function(){$(this).prop("checked")?(window.dataLayer=window.dataLayer||[],dataLayer.push({trackPageview:"/form",event:"loadready"})):$("#form_popup").removeClass("direct thanks")}),$("body#top").length){let e=o-(i?0:60),t=$("#fv>.wrapper").innerHeight();if(e<t){let o=(e-110)/(t-110);$("#fv>.wrapper").css({"transform-origin":"left 90px",transform:"scale("+o+")"}),$("#fv").css("height",e+90+"px"),$("#fv .scroll").css("right","-"+100*(1-o)/o+"%"),$("#fv .scroll").css("bottom","-"+40*(1-o)/o+"px")}}if($("body#process, body#price").length&&a&&$(a+"_open").prop("checked",!0).change(),$("body#quality").length){let e=1,t=$(".effortSec").length+1;for(;e<t&&n>=$("#effort"+e+">.wrapper").offset().top-o-1;)$("#effort"+e).addClass("show"),e++;let a=e;for(;a<t;)$("#effort"+a).css("height","100vh"),a++,a<t?$("#effort"+a).css("display","none"):($("#messageArea").css("display","none"),$("footer").css("height","0"),i||($(".bodyWrapper").css("border-radius","10px 10px 0 0"),$("body").css("padding-bottom","0")));$(window).scroll(function(){if(e<t&&$("#effort"+e).is(":visible")&&n>=$("#effort"+e+">.wrapper").offset().top-o-1){let o=e;e++,setTimeout(function(){$("#effort"+o).addClass("show")},400),setTimeout(function(){$("#effort"+o).css("height","auto"),o++,o<t?$("#effort"+o).css("display","block"):($("#messageArea").css("display","block"),$("footer").css("height","auto"),i||($(".bodyWrapper").css("border-radius",""),$("body").css("padding-bottom","")))},1e3)}}),$(".pageLink").click(function(){let a=$(this).data("page");for(;e<a;)$("#effort"+e).addClass("show"),$("#effort"+e).css("height","auto"),e++,e<t?$("#effort"+e).css("display","block"):$("#messageArea, footer").css("display","block");let n=$("#effort"+a+">.wrapper").offset().top-o;$("html, body").animate({scrollTop:n},500,"swing")})}$("body#ultra-fit-denture").length&&$(".controller").draggable({axis:"x",containment:"parent",drag:function(e,t){let o=t.position.left;$(this).next(".inner").children(".imgL").css("width",o)}}),$(".setupList").each(function(e,t){const o=$(t);let a,n,i,r=!1;if(o.on("init",function(e,t){a=t.slideCount}).slick({arrows:!1,fade:!0,speed:0,autoplay:!0,autoplaySpeed:120,pauseOnFocus:!1,pauseOnHover:!1,swipe:!1,draggable:!1}).on("afterChange",function(e,t,s){!r&&s>=a-1&&($(this).slick("slickPause"),n=setTimeout(function(){o.slick("slickGoTo",0,!1)},1e3),i=setTimeout(function(){o.slick("slickPlay")},2e3))}),o.next().hasClass("setupRange")){const e=o.next();e.val(0).attr("min",0).attr("max",a-1),o.on("afterChange",function(t,o,a){e.val(a).change()}),e.on("input change",function(){o.slick("slickGoTo",e.val(),!1)}).on("mousedown touchstart touchmove keydown",function(){r=!0,clearTimeout(n),clearTimeout(i),o.slick("slickPause")}).on("mouseup touchend keyup",function(){r=!1,o.slick("slickCurrentSlide")<a-1?i=setTimeout(function(){o.slick("slickPlay")},1e3):(n=setTimeout(function(){o.slick("slickGoTo",0,!1)},1e3),i=setTimeout(function(){o.slick("slickPlay")},2e3))})}}),$(".setupRange").on("input change",function(){const e=$(this).css("color"),t=$(this).parent().css("color").replace("rgb(","rgba(").replace(")",", 0.2)"),o=(this.value-this.min)/(this.max-this.min)*100;$(this).css("background",`linear-gradient(90deg, ${e} ${o}%, ${t} ${o}%)`)});var r=$("form#contact_form");r.validate({ignore:{},rules:{date1:{required:!0},"time1[]":{required:!0},date2:{required:!0},"time2[]":{required:!0},"purpose[]":{required:!0},name:{required:!0},email:{required:!0,email:!0},tel:{required:!0,telnum:!0},privacy:{required:!0}},messages:{date1:{required:"第一希望を選択してください"},"time1[]":{required:"第一希望を選択してください"},date2:{required:"第二希望を選択してください"},"time2[]":{required:"第二希望を選択してください"},"purpose[]":{required:"受けたい治療を選択してください"},name:{required:"氏名を入力してください"},email:{required:"メールアドレスを入力してください",email:"メールアドレスの形式で入力してください"},tel:{required:"電話番号を入力してください",telnum:"電話番号の形式で入力してください"},privacy:{required:"個人情報保護方針をご確認ください"}},groups:{datetime1:"date1 time1[]",datetime2:"date2 time2[]"},errorPlacement:function(e,t){e.appendTo(t.parent().parent())}});$("#btnForm").on("click",function(e){if(e.preventDefault(),r.valid()){var t=$("#contact_form"),o=t.find("#btnForm");if(o.hasClass("disabled"))return void console.log("button is disabled.");$.ajax({url:"/send",type:"post",data:t.serialize(),timeout:1e4,beforeSend:function(e,t){o.addClass("disabled")},complete:function(e,t){o.removeClass("disabled")},success:function(e,o,a){"success"==e?(window.dataLayer=window.dataLayer||[],dataLayer.push({trackPageview:"/thanks",event:"loadready"}),t[0].reset(),$("#form_popup").addClass("thanks")):(console.log(e),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。"))},error:function(e,t,o){console.log("通信エラー"),console.log(e),console.log(t),console.log(o),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。")}})}else $("#form_popup .reserv_form .wrapper").animate({scrollTop:0},{queue:!1})});var s=$("form#workplace_tour_form");s.validate({ignore:{},rules:{wt_name:{required:!0},wt_tel:{required:!0,telnum:!0},wt_email:{required:!0,email:!0},tourJoin:{required:!0},wt_privacy:{required:!0}},messages:{wt_name:{required:"氏名を入力してください"},wt_tel:{required:"電話番号を入力してください",telnum:"電話番号の形式で入力してください"},wt_email:{required:"メールアドレスを入力してください",email:"メールアドレスの形式で入力してください"},tourJoin:{required:"希望を選択してください"},wt_privacy:{required:"個人情報保護方針をご確認ください"}},errorPlacement:function(e,t){e.appendTo(t.parent().parent())}});$("#btnWorkplaceTourForm").on("click",function(e){if(e.preventDefault(),s.valid()){var t=$("#workplace_tour_form"),o=t.find("#btnWorkplaceTourForm");if(o.hasClass("disabled"))return void console.log("button is disabled.");$.ajax({url:"/recruit/send",type:"post",data:t.serialize(),timeout:1e4,beforeSend:function(e,t){o.addClass("disabled")},complete:function(e,t){o.removeClass("disabled")},success:function(e,o,a){"success"==e?(window.dataLayer=window.dataLayer||[],dataLayer.push({trackPageview:"/recruit/thanks",event:"loadready"}),t[0].reset(),$("#wt_form_thanks_open").prop("checked",!0).change()):(console.log(e),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。"))},error:function(e,t,o){console.log("通信エラー"),console.log(e),console.log(t),console.log(o),alert("フォーム送信に失敗しました。時間をおいて再度実行してください。")}})}}),jQuery.validator.addMethod("kana",function(e,t){return this.optional(t)||/^([ァ-ヶーぁ-ん]+)$/.test(e)},"全角ひらがな･カタカナを入力してください"),jQuery.validator.addMethod("hiragana",function(e,t){return this.optional(t)||/^([ぁ-ん]+)$/.test(e)},"全角ひらがなを入力してください"),jQuery.validator.addMethod("katakana",function(e,t){return this.optional(t)||/^([ァ-ヶー]+)$/.test(e)},"全角カタカナを入力してください"),jQuery.validator.addMethod("hankana",function(e,t){return this.optional(t)||/^([ｧ-ﾝﾞﾟ]+)$/.test(e)},"半角カタカナを入力してください"),jQuery.validator.addMethod("alphabet",function(e,t){return this.optional(t)||/^([a-zA-z\s]+)$/.test(e)},"半角英字を入力してください"),jQuery.validator.addMethod("alphanum",function(e,t){return this.optional(t)||/^([a-zA-Z0-9]+)$/.test(e)},"半角英数字を入力してください"),jQuery.validator.addMethod("postnum",function(e,t){return this.optional(t)||/^\d{3}\-\d{4}$|^[0-9]{7}$/.test(e)},"郵便番号を入力してください（例:123-4567）"),jQuery.validator.addMethod("mobilenum",function(e,t){return this.optional(t)||/^0\d0-\d{4}-\d{4}$/.test(e)},"携帯番号を入力してください（例:010-2345-6789）"),jQuery.validator.addMethod("telnum",function(e,t){return this.optional(t)||/^(0\d{1,4}[\s-]?\d{1,4}[\s-]?\d{4})$/.test(e)},"電話番号を入力してください（例:012-345-6789）"),$("form").on("keydown","input, button, select",function(e){if(13==e.keyCode){if("submit"==$(this).attr("type"))return;var t=$(this).closest("form"),o=t.find('input, button[type="submit"], select, textarea').not("[readonly]").filter(":visible");if(e.shiftKey)o.eq(o.index(this)-1).focus();else{var a=o.eq(o.index(this)+1);a.length?a.focus():o.eq(0).focus()}e.preventDefault()}}),$('input[type="radio"], input[type="checkbox"], select').change(function(){var e=$(this).attr("name");e&&(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"event",category:"form_event",action:"select",label:e}))}),$('input[type="text"], input[type="number"], input[type="email"], input[type="tel"]').focus(function(){var e=$(this).attr("name");e&&(window.dataLayer=window.dataLayer||[],dataLayer.push({event:"event",category:"form_event",action:"select",label:e}))}),$('[id^="btn"]').click(function(){var e=$(this).attr("id");window.dataLayer=window.dataLayer||[],dataLayer.push({event:"event",category:"form_event",action:"click",label:e})})});